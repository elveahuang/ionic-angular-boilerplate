import{c as y,d as x,e as I}from"./chunk-BRK3PSGP.js";import"./chunk-BE6QDHP3.js";import{b as w}from"./chunk-OBJR2C2W.js";import{b}from"./chunk-IMEZFUUC.js";import{b as v,c as k}from"./chunk-KBSOTDQ5.js";import{c as l,d as C,g as A,h as E,k as S}from"./chunk-C6IVXB7Y.js";import{h as g,i as h}from"./chunk-MARZMKXQ.js";import{e as p}from"./chunk-XD4PSF4R.js";var L=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;max-width:100%;height:200px;font-size:22px;text-align:center}.picker-opts{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0px;padding-bottom:0px;min-width:26px;max-height:200px;outline:none;text-align:inherit;-webkit-scroll-snap-type:y mandatory;-ms-scroll-snap-type:y mandatory;scroll-snap-type:y mandatory;overflow-x:hidden;overflow-y:scroll;scrollbar-width:none}.picker-item-empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;height:34px;border:0px;outline:none;background:transparent;color:inherit;font-family:var(--ion-font-family, inherit);font-size:inherit;line-height:34px;text-align:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.picker-opts::-webkit-scrollbar{display:none}::slotted(ion-picker-column-option){display:block;scroll-snap-align:center}.picker-item-empty,:host(:not([disabled])) ::slotted(ion-picker-column-option.option-disabled){scroll-snap-align:none}::slotted([slot=prefix]),::slotted([slot=suffix]){max-width:200px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}::slotted([slot=prefix]){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:0;-ms-flex-pack:end;justify-content:end}::slotted([slot=suffix]){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:0;-ms-flex-pack:start;justify-content:start}:host(.picker-column-disabled) .picker-opts{overflow-y:hidden}:host(.picker-column-disabled) ::slotted(ion-picker-column-option){cursor:default;opacity:0.4;pointer-events:none}@media (any-hover: hover){:host(:focus) .picker-opts{outline:none;background:rgba(var(--ion-color-base-rgb), 0.2)}}",V=L,N=class{constructor(n){S(this,n),this.ionChange=E(this,"ionChange",7),this.isScrolling=!1,this.isColumnVisible=!1,this.canExitInputMode=!0,this.centerPickerItemInView=(e,t=!0,s=!0)=>{let{isColumnVisible:i,scrollEl:o}=this;if(i&&o){let r=e.offsetTop-3*e.clientHeight+e.clientHeight/2;o.scrollTop!==r&&(this.canExitInputMode=s,o.scroll({top:r,left:0,behavior:t?"smooth":void 0}))}},this.setPickerItemActiveState=(e,t)=>{t?e.classList.add(f):e.classList.remove(f)},this.inputModeChange=e=>{if(!this.numericInput)return;let{useInputMode:t,inputModeColumn:s}=e.detail,i=s===void 0||s===this.el;if(!t||!i){this.setInputModeActive(!1);return}this.setInputModeActive(!0)},this.setInputModeActive=e=>{if(this.isScrolling){this.scrollEndCallback=()=>{this.isActive=e};return}this.isActive=e},this.initializeScrollListener=()=>{let e=v("ios"),{el:t,scrollEl:s}=this,i,o=this.activeItem,r=()=>{h(()=>{if(!s)return;i&&(clearTimeout(i),i=void 0),this.isScrolling||(e&&y(),this.isScrolling=!0);let c=s.getBoundingClientRect(),M=c.x+c.width/2,P=c.y+c.height/2,u=t.getRootNode(),m=u instanceof ShadowRoot?u:b;if(m===void 0)return;let a=m.elementsFromPoint(M,P).find(d=>d.tagName==="ION-PICKER-COLUMN-OPTION");o!==void 0&&this.setPickerItemActiveState(o,!1),!(a===void 0||a.disabled)&&(a!==o&&(e&&x(),this.canExitInputMode&&this.exitInputMode()),o=a,this.setPickerItemActiveState(a,!0),i=setTimeout(()=>{this.isScrolling=!1,e&&I();let{scrollEndCallback:d}=this;d&&(d(),this.scrollEndCallback=void 0),this.canExitInputMode=!0,this.setValue(a.value)},250))})};h(()=>{s&&(s.addEventListener("scroll",r),this.destroyScrollListener=()=>{s.removeEventListener("scroll",r)})})},this.exitInputMode=()=>{let{parentEl:e}=this;e!=null&&(e.exitInputMode(),this.el.classList.remove("picker-column-active"))},this.isActive=!1,this.disabled=!1,this.value=void 0,this.color="primary",this.numericInput=!1}valueChange(){this.isColumnVisible&&this.scrollActiveItemIntoView(!0)}componentWillLoad(){let n=this.parentEl=this.el.closest("ion-picker"),e=t=>{if(t[t.length-1].isIntersecting){let{activeItem:i,el:o}=this;this.isColumnVisible=!0;let r=g(o).querySelector(`.${f}`);r&&this.setPickerItemActiveState(r,!1),this.scrollActiveItemIntoView(),i&&this.setPickerItemActiveState(i,!0),this.initializeScrollListener()}else this.isColumnVisible=!1,this.destroyScrollListener&&(this.destroyScrollListener(),this.destroyScrollListener=void 0)};new IntersectionObserver(e,{threshold:.001,root:this.parentEl}).observe(this.el),n!==null&&n.addEventListener("ionInputModeChange",t=>this.inputModeChange(t))}componentDidRender(){let{el:n,activeItem:e,isColumnVisible:t,value:s}=this;if(t&&!e){let i=n.querySelector("ion-picker-column-option");i!==null&&i.value!==s&&this.setValue(i.value)}}scrollActiveItemIntoView(n=!1){return p(this,null,function*(){let e=this.activeItem;e&&this.centerPickerItemInView(e,n,!1)})}setValue(n){return p(this,null,function*(){this.disabled===!0||this.value===n||(this.value=n,this.ionChange.emit({value:n}))})}setFocus(){return p(this,null,function*(){this.scrollEl&&this.scrollEl.focus()})}get activeItem(){let{value:n}=this;return Array.from(this.el.querySelectorAll("ion-picker-column-option")).find(t=>!this.disabled&&t.disabled?!1:t.value===n)}render(){let{color:n,disabled:e,isActive:t,numericInput:s}=this,i=k(this);return l(C,{key:"20de89f624d0fdbb4eadf912a6a8a8c1f3c374bc",class:w(n,{[i]:!0,"picker-column-active":t,"picker-column-numeric-input":s,"picker-column-disabled":e})},l("slot",{key:"39bd2171785e21aef935787d8222949a2d29a771",name:"prefix"}),l("div",{key:"97217b758b65913db869f322b8f127f0da3a1c28",class:"picker-opts",tabindex:e?void 0:0,ref:o=>{this.scrollEl=o}},l("div",{key:"8cfd8f5de1c274f7b2b5b14c7f6f875d475edc5c",class:"picker-item-empty","aria-hidden":"true"},"\xA0"),l("div",{key:"cfbf7e8abe54c4df98addb9a24e82dd803ba95c0",class:"picker-item-empty","aria-hidden":"true"},"\xA0"),l("div",{key:"8049923186d8b5ce28da2ce90ad720c244395f9c",class:"picker-item-empty","aria-hidden":"true"},"\xA0"),l("slot",{key:"180efa3b7874e2b4269fb150794eaeab9f648f2e"}),l("div",{key:"9161cc3e344b92354276981813e1d55ef9979dea",class:"picker-item-empty","aria-hidden":"true"},"\xA0"),l("div",{key:"ce703fb3ea07d5ea2abf526d64ca85d2beed15f1",class:"picker-item-empty","aria-hidden":"true"},"\xA0"),l("div",{key:"6ce6cb5de80ac316a664e9cfcecf1897c8f90e58",class:"picker-item-empty","aria-hidden":"true"},"\xA0")),l("slot",{key:"ecccfa6bd8f6d2d641109e74d0788081e3f29801",name:"suffix"}))}get el(){return A(this)}static get watchers(){return{value:["valueChange"]}}},f="option-active";N.style=V;export{N as ion_picker_column};
